<!DOCTYPE html>
<html>
<head>
    <title>데이터 확인</title>
</head>
<body>
    <h1>9월8일 데이터 확인</h1>
    <div id="result"></div>
    
    <script>
        async function checkData() {
            const db = await new Promise((resolve, reject) => {
                const request = indexedDB.open('YouTubePulseDB', 1);
                request.onsuccess = () => resolve(request.result);
                request.onerror = () => reject(request.error);
            });
            
            const transaction = db.transaction(['classifiedData'], 'readonly');
            const store = transaction.objectStore('classifiedData');
            const allData = await new Promise((resolve, reject) => {
                const request = store.getAll();
                request.onsuccess = () => resolve(request.result);
                request.onerror = () => reject(request.error);
            });
            
            console.log('전체 데이터 개수:', allData.length);
            
            // 9월8일 데이터 확인
            const sep8Data = allData.filter(item => {
                const date = (item.collectionDate || item.uploadDate)?.split('T')[0];
                return date === '2025-09-08';
            });
            
            console.log('9월8일 데이터 개수:', sep8Data.length);
            
            if (sep8Data.length > 0) {
                console.log('9월8일 데이터 샘플:');
                sep8Data.slice(0, 3).forEach((item, index) => {
                    console.log(`${index + 1}. ${item.title} - ${item.category} - ${item.viewCount}회`);
                });
                
                // 카테고리별 조회수 합계
                const categoryViews = {};
                sep8Data.forEach(item => {
                    if (item.category && item.viewCount) {
                        categoryViews[item.category] = (categoryViews[item.category] || 0) + item.viewCount;
                    }
                });
                
                console.log('9월8일 카테고리별 조회수:');
                Object.entries(categoryViews).forEach(([category, views]) => {
                    console.log(`${category}: ${views.toLocaleString()}회`);
                });
            }
            
            // 날짜별 데이터 개수 확인
            const dateCounts = {};
            allData.forEach(item => {
                const date = (item.collectionDate || item.uploadDate)?.split('T')[0];
                if (date) {
                    dateCounts[date] = (dateCounts[date] || 0) + 1;
                }
            });
            
            console.log('날짜별 데이터 개수:');
            Object.keys(dateCounts).sort().forEach(date => {
                console.log(`${date}: ${dateCounts[date]}개`);
            });
            
            // 결과를 화면에 표시
            document.getElementById('result').innerHTML = `
                <p>전체 데이터 개수: ${allData.length}</p>
                <p>9월8일 데이터 개수: ${sep8Data.length}</p>
                <p>날짜별 데이터 개수:</p>
                <ul>
                    ${Object.keys(dateCounts).sort().map(date => 
                        `<li>${date}: ${dateCounts[date]}개</li>`
                    ).join('')}
                </ul>
            `;
        }
        
        checkData().catch(console.error);
    </script>
</body>
</html>


